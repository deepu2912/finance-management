<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="images/icon.png" type="image/gif" sizes="16x16" />
    <!-- Primary Meta Tags -->
    <title>
      Trusted Investment & Tax Advisors | Achieve Your Financial Goals
    </title>
    <meta
      name="description"
      content="Partner with certified investment and tax advisors dedicated to helping you achieve financial freedom. Smart planning, expert guidance, and proven results."
    />
    <meta
      name="keywords"
      content="financial goals, investment advisor, tax consultant, wealth management, retirement planning, tax saving, financial planning, certified tax advisor, trusted financial advisor"
    />
    <meta name="author" content="Your Company Name" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- CSS Files
    ================================================== -->
    <link
      href="css/bootstrap.min.css"
      rel="stylesheet"
      type="text/css"
      id="bootstrap"
    />
    <link href="css/plugins.css" rel="stylesheet" type="text/css" />
    <link href="css/style.css" rel="stylesheet" type="text/css" />
    <link href="css/color.css" rel="stylesheet" type="text/css" />

    <!-- color scheme -->
    <link
      rel="stylesheet"
      href="css/colors/teal.css"
      type="text/css"
      id="colors"
    />

    <!-- RS5.0 Stylesheet -->
    <link rel="stylesheet" href="revolution/css/settings.css" type="text/css" />
    <link rel="stylesheet" href="revolution/css/layers.css" type="text/css" />
    <link
      rel="stylesheet"
      href="revolution/css/navigation.css"
      type="text/css"
    />
    <link rel="stylesheet" href="css/rev-settings.css" type="text/css" />

    <!-- custom font -->
    <link rel="stylesheet" href="css/font-style-3.css" type="text/css" />

    <style>
      .loanCalculator_form {
        display: grid;
        grid-template-columns: 1fr;
        gap: 16px;
      }
    </style>
  </head>

  <body id="homepage" class="de_light">
    <div id="wrapper">
      <!-- header begin -->
      <div id="header"></div>
      <!-- header close -->

      <!-- content begin -->
      <div id="content" class="no-bottom no-top">
        <section id="section-services" style="background-size: cover">
          <div class="container tax-form bg-white p-4 rounded shadow">
            <h2 class="mb-4 text-center">
              Indian Income Tax Calculator<br /><small class="text-muted"
                >(FY 2025–26)</small
              >
            </h2>
            <div class="row">
              <!-- Input Form: Left Side -->
              <div class="col-lg-8 col-md-7 mb-4 mb-md-0">
                <form id="taxForm" autocomplete="off">
                  <div class="mb-3">
                    <label class="form-label fw-bold">Select Tax Regime:</label
                    ><br />
                    <div class="btn-group w-100" role="group">
                      <input
                        type="radio"
                        class="btn-check"
                        name="regime"
                        id="newRegime"
                        value="new"
                        autocomplete="off"
                        checked
                      />
                      <label class="btn btn-outline-primary" for="newRegime"
                        >New Regime</label
                      >
                      <input
                        type="radio"
                        class="btn-check"
                        name="regime"
                        id="oldRegime"
                        value="old"
                        autocomplete="off"
                      />
                      <label class="btn btn-outline-primary" for="oldRegime"
                        >Old Regime</label
                      >
                    </div>
                  </div>
                  <div class="mb-3">
                    <label for="income" class="form-label"
                      >Annual Gross Income (₹):
                      <span class="text-danger">*</span></label
                    >
                    <input
                      type="text"
                      class="form-control"
                      id="income"
                      min="0"
                      required
                      autocomplete="off"
                    />
                    <div
                      id="incomeWords"
                      class="form-text mt-1 text-secondary"
                    ></div>
                  </div>
                  <div class="mb-3">
                    <label for="employmentType" class="form-label"
                      >Employment Type:
                      <span class="text-danger">*</span></label
                    >
                    <select class="form-select" id="employmentType" required>
                      <option value="">Select Employment Type</option>
                      <option value="salaried">Salaried / Pensioner</option>
                      <option value="other">Other</option>
                    </select>
                  </div>
                  <div class="mb-3">
                    <label class="form-label fw-bold"
                      >Age Group: <span class="text-danger">*</span></label
                    ><br />
                    <div class="btn-group w-100" role="group">
                      <input
                        type="radio"
                        class="btn-check"
                        name="ageGroup"
                        id="age1"
                        value="lt60"
                        checked
                      />
                      <label class="btn btn-outline-secondary" for="age1"
                        >&lt; 60</label
                      >
                      <input
                        type="radio"
                        class="btn-check"
                        name="ageGroup"
                        id="age2"
                        value="senior"
                      />
                      <label class="btn btn-outline-secondary" for="age2"
                        >60 – &lt;80</label
                      >
                      <input
                        type="radio"
                        class="btn-check"
                        name="ageGroup"
                        id="age3"
                        value="super"
                      />
                      <label class="btn btn-outline-secondary" for="age3"
                        >80+</label
                      >
                    </div>
                  </div>
                  <div id="oldRegimeFields" style="display: none">
                    <div class="mb-3">
                      <label for="ded80C" class="form-label"
                        >Deduction 80C (LIC, PPF, ELSS, etc.)
                        <small>(Max ₹1,50,000)</small></label
                      >
                      <input
                        type="text"
                        class="form-control"
                        id="ded80C"
                        min="0"
                        max="150000"
                        step="100"
                        value="0"
                        autocomplete="off"
                      />
                    </div>
                    <div class="mb-3">
                      <label for="ded80D" class="form-label"
                        >Deduction 80D (Medical Insurance)</label
                      >
                      <input
                        type="text"
                        class="form-control"
                        id="ded80D"
                        min="0"
                        step="100"
                        value="0"
                        autocomplete="off"
                      />
                    </div>
                    <div class="mb-3">
                      <label for="ded80CCD" class="form-label"
                        >Deduction 80CCD(1B) (NPS)</label
                      >
                      <input
                        type="text"
                        class="form-control"
                        id="ded80CCD"
                        min="0"
                        step="100"
                        value="0"
                        autocomplete="off"
                      />
                    </div>
                    <div class="mb-3">
                      <label for="ded24b" class="form-label"
                        >Deduction 24(b) (Home Loan Interest)</label
                      >
                      <input
                        type="text"
                        class="form-control"
                        id="ded24b"
                        min="0"
                        step="100"
                        value="0"
                        autocomplete="off"
                      />
                    </div>
                    <div class="mb-3">
                      <label for="ded80E" class="form-label"
                        >Deduction 80E (Education Loan Interest)</label
                      >
                      <input
                        type="text"
                        class="form-control"
                        id="ded80E"
                        min="0"
                        step="100"
                        value="0"
                        autocomplete="off"
                      />
                    </div>
                    <div class="mb-3">
                      <label class="form-label fw-bold"
                        >Deduction 80G (Donations)</label
                      >
                      <div class="row g-2">
                        <div class="col-6">
                          <label for="ded80GAmount" class="form-label"
                            >Donation Amount (₹)</label
                          >
                          <input
                            type="text"
                            class="form-control"
                            id="ded80GAmount"
                            min="0"
                            step="100"
                            value="0"
                            autocomplete="off"
                          />
                        </div>
                        <div class="col-6">
                          <label for="ded80GCategory" class="form-label"
                            >Organization Category</label
                          >
                          <select class="form-select" id="ded80GCategory">
                            <option value="100_no_limit">
                              100% without limit
                            </option>
                            <option value="50_no_limit">
                              50% without limit
                            </option>
                            <option value="100_with_limit">
                              100% with qualifying limit
                            </option>
                            <option value="50_with_limit">
                              50% with qualifying limit
                            </option>
                          </select>
                        </div>
                      </div>
                    </div>
                    <div class="mb-3 border rounded p-2">
                      <label class="form-label fw-bold">HRA Exemption</label>
                      <div class="row g-2">
                        <div class="col-6">
                          <label for="basicSalary" class="form-label"
                            >Basic Salary (₹)</label
                          >
                          <input
                            type="text"
                            class="form-control"
                            id="basicSalary"
                            min="0"
                            step="100"
                            value="0"
                            autocomplete="off"
                          />
                        </div>
                        <div class="col-6">
                          <label for="hraReceived" class="form-label"
                            >HRA Received (₹)</label
                          >
                          <input
                            type="text"
                            class="form-control"
                            id="hraReceived"
                            min="0"
                            step="100"
                            value="0"
                            autocomplete="off"
                          />
                        </div>
                        <div class="col-6">
                          <label for="rentPaid" class="form-label"
                            >Rent Paid (₹)</label
                          >
                          <input
                            type="text"
                            class="form-control"
                            id="rentPaid"
                            min="0"
                            step="100"
                            value="0"
                            autocomplete="off"
                          />
                        </div>
                        <div class="col-6">
                          <label class="form-label">Metro City?</label>
                          <div>
                            <input type="checkbox" id="isMetro" />
                            <label for="isMetro">Yes</label>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="d-flex gap-2">
                    <button type="submit" class="btn btn-primary w-100">
                      Calculate Tax
                    </button>
                    <button
                      type="button"
                      class="btn btn-outline-secondary w-100"
                      id="resetBtn"
                    >
                      Reset
                    </button>
                  </div>
                </form>
                <div id="errorMsg" class="alert alert-danger mt-3 d-none"></div>
              </div>
              <!-- Result: Right Side -->
              <div class="col-lg-4 col-md-5">
                <div id="taxResult" class="mt-2 d-none"></div>
              </div>
            </div>
          </div>
          <script>
            // ... (all your existing JS code remains unchanged)
            // Helper: number to words (Indian system)
            function numberToWords(num) {
                if (!num || isNaN(num)) return "";
                const a = [
                    "",
                    "One",
                    "Two",
                    "Three",
                    "Four",
                    "Five",
                    "Six",
                    "Seven",
                    "Eight",
                    "Nine",
                    "Ten",
                    "Eleven",
                    "Twelve",
                    "Thirteen",
                    "Fourteen",
                    "Fifteen",
                    "Sixteen",
                    "Seventeen",
                    "Eighteen",
                    "Nineteen",
                ];
                const b = [
                    "",
                    "",
                    "Twenty",
                    "Thirty",
                    "Forty",
                    "Fifty",
                    "Sixty",
                    "Seventy",
                    "Eighty",
                    "Ninety",
                ];
                function inWords(n) {
                    if (n < 20) return a[n];
                    if (n < 100) return b[Math.floor(n / 10)] + (n % 10 ? " " + a[n % 10] : "");
                    if (n < 1000)
                        return (
                            a[Math.floor(n / 100)] +
                            " Hundred" +
                            (n % 100 ? " " + inWords(n % 100) : "")
                        );
                    return "";
                }
                let s = "";
                if (num === 0) return "Zero";
                if (num > 99999999) {
                    s += inWords(Math.floor(num / 10000000)) + " Crore ";
                    num = num % 10000000;
                }
                if (num > 99999) {
                    s += inWords(Math.floor(num / 100000)) + " Lakh ";
                    num = num % 100000;
                }
                if (num > 999) {
                    s += inWords(Math.floor(num / 1000)) + " Thousand ";
                    num = num % 1000;
                }
                if (num > 0) {
                    s += inWords(num);
                }
                return s.trim();
            }

            // Indian number formatting with commas
            function formatIndianNumber(x) {
                x = x.toString().replace(/[^0-9]/g, "");
                if (x === "") return "";
                let lastThree = x.substring(x.length - 3);
                let otherNumbers = x.substring(0, x.length - 3);
                if (otherNumbers !== "")
                    lastThree = "," + lastThree;
                return (
                    otherNumbers.replace(/\B(?=(\d{2})+(?!\d))/g, ",") + lastThree
                );
            }

            // List of all input fields to apply formatting
            const inputIds = [
                "income",
                "ded80C",
                "ded80D",
                "ded80CCD",
                "ded24b",
                "ded80E",
                "ded80GAmount",
                "basicSalary",
                "hraReceived",
                "rentPaid"
            ];

            // Attach formatting logic to all relevant fields
            inputIds.forEach(function(id) {
                const el = document.getElementById(id);
                if (!el) return;
                el.addEventListener("input", function(e) {
                    let val = el.value.replace(/,/g, "").replace(/[^\d]/g, "");
                    if (val.length > 15) val = val.slice(0, 15); // limit to 15 digits
                    el.value = formatIndianNumber(val);

                    // For income field, show in words
                    if (id === "income") {
                        const incomeWords = document.getElementById("incomeWords");
                        if (val) {
                            let n = parseInt(val, 10);
                            incomeWords.textContent = numberToWords(n) + " Rupees";
                        } else {
                            incomeWords.textContent = "";
                        }
                    }
                });
            });

            // On form submit, set all values as numbers (for calculation)
            document.getElementById("taxForm").addEventListener("submit", function () {
                inputIds.forEach(function(id) {
                    const el = document.getElementById(id);
                    if (el) el.value = el.value.replace(/,/g, "");
                });
            });

            // Show/hide old regime fields
            function toggleRegimeFields() {
                const regime = document.querySelector('input[name="regime"]:checked').value;
                document.getElementById("oldRegimeFields").style.display = regime === "old" ? "block" : "none";
            }
            document.querySelectorAll('input[name="regime"]').forEach((radio) => {
                radio.addEventListener("change", function () {
                    document.getElementById("taxResult").classList.add("d-none");
                    document.getElementById("errorMsg").classList.add("d-none");
                    toggleRegimeFields();
                });
            });
            toggleRegimeFields();

            // Slabs for Old Regime by age
            const slabsOld = {
                lt60: [
                    { upto: 250000, rate: 0 },
                    { upto: 500000, rate: 0.05 },
                    { upto: 1000000, rate: 0.2 },
                    { upto: Infinity, rate: 0.3 },
                ],
                senior: [
                    { upto: 300000, rate: 0 },
                    { upto: 500000, rate: 0.05 },
                    { upto: 1000000, rate: 0.2 },
                    { upto: Infinity, rate: 0.3 },
                ],
                super: [
                    { upto: 500000, rate: 0 },
                    { upto: 1000000, rate: 0.2 },
                    { upto: Infinity, rate: 0.3 },
                ],
            };

            // New Regime slabs FY 2025-26
            const slabsNew = [
                { upto: 400000, rate: 0 },
                { upto: 800000, rate: 0.05 },
                { upto: 1200000, rate: 0.1 },
                { upto: 1600000, rate: 0.15 },
                { upto: 2000000, rate: 0.2 },
                { upto: 2400000, rate: 0.25 },
                { upto: Infinity, rate: 0.3 },
            ];

            function getFormData() {
                return {
                    regime: document.querySelector('input[name="regime"]:checked').value,
                    income: Number(document.getElementById("income").value.replace(/,/g, "")),
                    employmentType: document.getElementById("employmentType").value,
                    ageGroup: document.querySelector('input[name="ageGroup"]:checked').value,
                    ded80C: Number(document.getElementById("ded80C")?.value.replace(/,/g, "") || 0),
                    ded80D: Number(document.getElementById("ded80D")?.value.replace(/,/g, "") || 0),
                    ded80CCD: Number(document.getElementById("ded80CCD")?.value.replace(/,/g, "") || 0),
                    ded24b: Number(document.getElementById("ded24b")?.value.replace(/,/g, "") || 0),
                    ded80E: Number(document.getElementById("ded80E")?.value.replace(/,/g, "") || 0),
                    ded80GAmount: Number(document.getElementById("ded80GAmount")?.value.replace(/,/g, "") || 0),
                    ded80GCategory: document.getElementById("ded80GCategory")?.value || "100_no_limit",
                    basicSalary: Number(document.getElementById("basicSalary")?.value.replace(/,/g, "") || 0),
                    hraReceived: Number(document.getElementById("hraReceived")?.value.replace(/,/g, "") || 0),
                    rentPaid: Number(document.getElementById("rentPaid")?.value.replace(/,/g, "") || 0),
                    isMetro: document.getElementById("isMetro")?.checked || false,
                };
            }
    
            function validateForm(data) {
                if (!data.income || data.income < 0)
                    return "Please enter a valid Annual Gross Income.";
                if (!data.employmentType)
                    return "Please select your Employment Type.";
                if (!data.ageGroup)
                    return "Please select your Age Group.";
                if (data.regime === "old") {
                    if (data.ded80C < 0 || data.ded80C > 150000)
                        return "Deduction 80C must be between 0 and ₹1,50,000.";
                    if (data.ded80D < 0 || data.ded80CCD < 0 || data.ded24b < 0 || data.ded80E < 0)
                        return "Deductions cannot be negative.";
                    if (data.ded80GAmount < 0)
                        return "Deduction 80G amount cannot be negative.";
                    if (data.basicSalary < 0 || data.hraReceived < 0 || data.rentPaid < 0)
                        return "HRA fields cannot be negative.";
                }
                return null;
            }

            function calcHRAExemption(basic, hra, rent, isMetro) {
                if (!basic || !hra || !rent) return 0;
                const perc = isMetro ? 0.5 : 0.4;
                const exempt = Math.min(
                    hra,
                    perc * basic,
                    Math.max(0, rent - 0.1 * basic)
                );
                return exempt;
            }
            function calcTaxOld(data) {
                // Standard deduction for salaried/pensioners
                let stdDed = data.employmentType === "salaried" ? 50000 : 0;
                // Deductions
                let ded80C = Math.min(data.ded80C, 150000);
                let hraExempt = calcHRAExemption(data.basicSalary, data.hraReceived, data.rentPaid, data.isMetro);

                // 80G deduction calculation
                let ded80G = 0;
                if (data.ded80GAmount && data.ded80GAmount > 0) {
                    let amt = data.ded80GAmount;
                    let cat = data.ded80GCategory;
                    if (cat === "100_no_limit") {
                        ded80G = amt;
                    } else if (cat === "50_no_limit") {
                        ded80G = amt * 0.5;
                    } else if (cat === "100_with_limit" || cat === "50_with_limit") {
                        // Qualifying limit is 10% of adjusted gross total income (before 80G)
                        let adjustedGTI =
                            data.income -
                            (stdDed +
                                ded80C +
                                data.ded80D +
                                data.ded80CCD +
                                data.ded24b +
                                data.ded80E +
                                hraExempt);
                        let qualifyingLimit = Math.max(0, adjustedGTI * 0.1);
                        let eligibleAmt = Math.min(amt, qualifyingLimit);
                        if (cat === "100_with_limit") {
                            ded80G = eligibleAmt;
                        } else {
                            ded80G = eligibleAmt * 0.5;
                        }
                    }
                    ded80G = Math.floor(ded80G); // round down as per rules
                }

                let totalDeductions =
                    stdDed +
                    ded80C +
                    data.ded80D +
                    data.ded80CCD +
                    data.ded24b +
                    data.ded80E +
                    hraExempt +
                    ded80G;

                let taxable = Math.max(0, data.income - totalDeductions);
                let slabs = slabsOld[data.ageGroup];
                let tax = 0,
                    prev = 0,
                    breakdown = [];
                for (let i = 0; i < slabs.length; i++) {
                    let slab = slabs[i];
                    let slabAmt = Math.min(taxable, slab.upto) - prev;
                    if (slabAmt > 0) {
                        let slabTax = slabAmt * slab.rate;
                        breakdown.push({
                            range: `₹${prev.toLocaleString()} – ₹${slab.upto === Infinity ? "∞" : slab.upto.toLocaleString()}`,
                            rate: slab.rate * 100,
                            amount: slabAmt,
                            tax: slabTax,
                        });
                        tax += slabTax;
                        prev = slab.upto;
                    }
                    if (taxable <= slab.upto) break;
                }
                // Section 87A rebate: up to ₹12,500 if taxable income ≤ ₹5,00,000 and tax before cess ≤ ₹12,500
                let rebate = 0,
                    rebateApplied = false,
                    rebateMsg = "";
                if (taxable <= 500000 && tax <= 12500) {
                    rebate = Math.min(tax, 12500);
                    tax = 0;
                    rebateApplied = true;
                    rebateMsg = `<div class="alert alert-success mt-2"><b>No tax due to ₹12,500 rebate (Section 87A).</b></div>`;
                }
                let cess = tax * 0.04;
                return {
                    taxable,
                    tax,
                    rebate,
                    rebateApplied,
                    rebateMsg,
                    cess,
                    total: tax + cess,
                    breakdown,
                    stdDed,
                    hraExempt,
                    totalDeductions,
                    ded80G,
                    hraExempt,
                    totalDeductions,
                };
            }

            function calcTaxNew(data) {
                let stdDed = data.employmentType === "salaried" ? 75000 : 0;
                let taxable = Math.max(0, data.income - stdDed);
                let tax = 0,
                    prev = 0,
                    breakdown = [];
                for (let i = 0; i < slabsNew.length; i++) {
                    let slab = slabsNew[i];
                    let slabAmt = Math.min(taxable, slab.upto) - prev;
                    if (slabAmt > 0) {
                        let slabTax = slabAmt * slab.rate;
                        breakdown.push({
                            range: `₹${prev.toLocaleString()} – ₹${slab.upto === Infinity ? "∞" : slab.upto.toLocaleString()}`,
                            rate: slab.rate * 100,
                            amount: slabAmt,
                            tax: slabTax,
                        });
                        tax += slabTax;
                        prev = slab.upto;
                    }
                    if (taxable <= slab.upto) break;
                }
                // Section 87A rebate: up to ₹60,000 if taxable ≤ ₹12L and tax before cess ≤ ₹60,000
                let rebate = 0,
                    rebateApplied = false,
                    rebateMsg = "";
                if (taxable <= 1200000 && tax <= 60000) {
                    rebate = Math.min(tax, 60000);
                    tax = 0;
                    rebateApplied = true;
                    rebateMsg = `<div class="alert alert-success mt-2"><b>No tax due to ₹60,000 rebate (Section 87A).</b></div>`;
                }
                // Marginal relief warning
                let marginalWarning = "";
                if (taxable > 1200000 && taxable <= 1220000) {
                    marginalWarning = `<div class="alert alert-warning mt-2">Marginal relief may apply if your income is just above ₹12,00,000. Check if your extra tax exceeds the extra income above ₹12L.</div>`;
                }
                let cess = tax * 0.04;
                return {
                    taxable,
                    tax,
                    rebate,
                    rebateApplied,
                    rebateMsg,
                    cess,
                    total: tax + cess,
                    breakdown,
                    stdDed,
                    marginalWarning,
                };
            }

            function formatBreakdown(breakdown) {
                return `<table class="table table-sm table-bordered slab-table mt-2">
                    <thead><tr><th>Slab</th><th>Rate (%)</th><th>Amount (₹)</th><th>Tax (₹)</th></tr></thead>
                    <tbody>
                        ${breakdown
                            .map(
                                (s) => `<tr>
                            <td>${s.range}</td>
                            <td>${s.rate}</td>
                            <td>${s.amount.toLocaleString()}</td>
                            <td>${Math.round(s.tax).toLocaleString()}</td>
                        </tr>`
                            )
                            .join("")}
                    </tbody>
                </table>`;
            }

            function showError(msg) {
                document.getElementById("errorMsg").textContent = msg;
                document.getElementById("errorMsg").classList.remove("d-none");
                document.getElementById("taxResult").classList.add("d-none");
            }

            function clearError() {
                document.getElementById("errorMsg").classList.add("d-none");
            }

            function showResult(html) {
                document.getElementById("taxResult").innerHTML = html;
                document.getElementById("taxResult").classList.remove("d-none");
            }

            // Suggest regime
            function suggestRegime(oldTax, newTax) {
                if (oldTax < newTax)
                    return `<div class="alert alert-info mt-3"><b>Old regime gives more savings by ₹${(newTax - oldTax).toLocaleString()}.</b></div>`;
                else if (newTax < oldTax)
                    return `<div class="alert alert-info mt-3"><b>New regime gives more savings by ₹${(oldTax - newTax).toLocaleString()}.</b></div>`;
                else
                    return `<div>
                        <div><b>Total Deductions:</b> ₹${oldRes.totalDeductions.toLocaleString()}</div>
                        <div><b>80G Deduction:</b> ₹${(oldRes.ded80G || 0).toLocaleString()}</div>
                    </div>`;
            }

            // Reset form
            document.getElementById("resetBtn").onclick = function () {
                document.getElementById("taxForm").reset();
                document.getElementById("taxResult").classList.add("d-none");
                document.getElementById("errorMsg").classList.add("d-none");
                // Reset all formatted fields
                inputIds.forEach(function(id) {
                    const el = document.getElementById(id);
                    if (el) el.value = "";
                });
                document.getElementById("incomeWords").textContent = "";
                toggleRegimeFields();
            };

            // Handle form submission and show results
            document.getElementById("taxForm").addEventListener("submit", function (e) {
                e.preventDefault();
                clearError();
                document.getElementById("taxResult").classList.add("d-none");
                const data = getFormData();
                const error = validateForm(data);
                if (error) {
                    showError(error);
                    return;
                }
                let resultHtml = "";
                // Always calculate both for suggestion
                let oldRes = calcTaxOld(data);
                let newRes = calcTaxNew(data);

                if (data.regime === "old") {
                    resultHtml = `
                        <h4>Old Regime Tax Calculation</h4>
                        <div><b>Gross Income:</b> ₹${data.income.toLocaleString()}</div>
                        <div><b>Standard Deduction:</b> ₹${oldRes.stdDed.toLocaleString()}</div>
                        <div><b>HRA Exemption:</b> ₹${oldRes.hraExempt.toLocaleString()}</div>
                        <div class="mt-2"><b>Deductions (excluding 80G):</b>
                            <ul>
                                <li>80C: ₹${data.ded80C.toLocaleString()}</li>
                                <li>80D: ₹${data.ded80D.toLocaleString()}</li>
                                <li>80CCD(1B): ₹${data.ded80CCD.toLocaleString()}</li>
                                <li>24(b): ₹${data.ded24b.toLocaleString()}</li>
                                <li>80E: ₹${data.ded80E.toLocaleString()}</li>
                                <li>HRA Exemption: ₹${oldRes.hraExempt.toLocaleString()}</li>
                                <li>Standard Deduction: ₹${oldRes.stdDed.toLocaleString()}</li>
                            </ul>
                        </div>
                        <div><b>80G Deduction (Donations):</b> ₹${(oldRes.ded80G || 0).toLocaleString()}</div>
                        <div><b>Total Deductions:</b> ₹${oldRes.totalDeductions.toLocaleString()}</div>
                        <div><b>Taxable Income:</b> ₹${oldRes.taxable.toLocaleString()}</div>
                        <div><b>Tax before cess:</b> ₹${Math.round(
                            oldRes.tax + (oldRes.rebate || 0)
                        ).toLocaleString()}</div>
                        ${
                            oldRes.rebateApplied
                                ? `<div><b>Rebate Applied (Section 87A):</b> ₹${oldRes.rebate.toLocaleString()}</div>`
                                : ""
                        }
                        <div><b>4% Cess:</b> ₹${Math.round(
                            oldRes.cess
                        ).toLocaleString()}</div>
                        <div><b>Final Tax Payable:</b> <span class="fw-bold text-primary">₹${Math.round(
                            oldRes.total
                        ).toLocaleString()}</span></div>
                        ${oldRes.rebateMsg}
                        <div class="mt-2"><b>Tax Slab Calculation:</b>${formatBreakdown(
                            oldRes.breakdown
                        )}</div>
                        ${suggestRegime(Math.round(oldRes.total), Math.round(newRes.total))}
                    `;
                } else {
                    resultHtml = `
                        <h4>New Regime Tax Calculation</h4>
                        <div><b>Gross Income:</b> ₹${data.income.toLocaleString()}</div>
                        <div><b>Standard Deduction:</b> ₹${newRes.stdDed.toLocaleString()}</div>
                        <div><b>Taxable Income:</b> ₹${newRes.taxable.toLocaleString()}</div>
                        <div><b>Tax before cess:</b> ₹${Math.round(
                            newRes.tax + newRes.rebate
                        ).toLocaleString()}</div>
                        ${
                            newRes.rebateApplied
                                ? `<div><b>Rebate Applied (Section 87A):</b> ₹${newRes.rebate.toLocaleString()}</div>`
                                : ""
                        }
                        <div><b>4% Cess:</b> ₹${Math.round(
                            newRes.cess
                        ).toLocaleString()}</div>
                        <div><b>Final Tax Payable:</b> <span class="fw-bold text-primary">₹${Math.round(
                            newRes.total
                        ).toLocaleString()}</span></div>
                        ${newRes.rebateMsg}
                        <div class="mt-2"><b>Tax Slab Calculation:</b>${formatBreakdown(
                            newRes.breakdown
                        )}</div>
                        ${newRes.marginalWarning}
                        ${suggestRegime(Math.round(oldRes.total), Math.round(newRes.total))}
                    `;
                }
                showResult(resultHtml);
            });
          </script>
        </section>

        <section
          id="section-action"
          class="jarallax text-light"
          aria-label="cta"
          style="background-size: cover; position: relative; z-index: 0"
          data-jarallax-original-styles="background-size: cover;"
        >
          <div class="container" style="background-size: cover">
            <div class="row align-items-center" style="background-size: cover">
              <div
                class="col-md-8 offset-md-2 text-center wow fadeInUp animated"
                style="
                  visibility: visible;
                  animation-name: fadeInUp;
                  background-size: cover;
                "
              >
                <h2>Do you looking for professional security camera?</h2>
                <p>
                  Lorem ipsum velit commodo proident sint in ad commodo culpa
                  dolor officia deserunt minim in amet irure proident duis
                  commodo adipisicing non ad ut quis exercitation dolor velit
                  esse esse velit eiusmod exercitation culpa ut tempor ut quis
                  in consectetur velit nostrud aliquip non in est enim pariatur
                  eiusmod ex irure tempor irure do ut magna.
                </p>
                <a
                  href="14_cctv-contact.html"
                  class="btn-custom text-light wow fadeInUp animated"
                  style="visibility: visible; animation-name: fadeInUp"
                  >Get a Free Quote
                </a>
              </div>
            </div>
          </div>
          <div
            id="jarallax-container-1"
            style="
              position: absolute;
              top: 0px;
              left: 0px;
              width: 100%;
              height: 100%;
              overflow: hidden;
              z-index: -100;
              clip-path: polygon(0px 0px, 100% 0px, 100% 100%, 0px 100%);
            "
          >
            <img
              src="14_images-cctv/bg/2.jpg"
              class="jarallax-img"
              alt=""
              style="
                object-fit: cover;
                object-position: 50% 50%;
                max-width: none;
                position: absolute;
                top: 0px;
                left: 0px;
                width: 1520.8px;
                height: 321.9px;
                overflow: hidden;
                pointer-events: none;
                transform-style: preserve-3d;
                backface-visibility: hidden;
                will-change: transform, opacity;
                margin-top: -30.95px;
                transform: translate3d(0px, -45.8875px, 0px);
              "
            />
          </div>
        </section>
      </div>

      <!-- footer begin -->
      <div id="footer"></div>
      <!-- footer close -->
    </div>

    <!-- Javascript Files
    ================================================== -->

    <script>
      function loadComponent(id, url) {
        fetch(url)
          .then((response) => response.text())
          .then((data) => (document.getElementById(id).innerHTML = data));
      }

      // Load header and footer
      loadComponent("header", "header.html");
      loadComponent("footer", "footer.html");
    </script>
    <script src="js/plugins.js"></script>
    <script src="js/designesia.js"></script>
  </body>
</html>
